<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from www.rp-photonics.com/software_news_2013_10_02.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Feb 2019 03:10:11 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Software from RP Photonics - How Mathematical Expressions are Treated in the Script Language of RP Photonics Software</title>
<link rel="stylesheet" type="text/css" href="styles.css">
<link rel="stylesheet" type="text/css" href="shariff/shariff.complete.css">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="alternate" type="application/rss+xml" title="The Photonics Spotlight" href="spotlight.rss">
<link rel="alternate" type="application/rss+xml" title="The RP Photonics Software News" href="software_news.rss">
<link rel="alternate" type="application/rss+xml" title="New encyclopedia articles" href="new_articles.rss">
<meta name="date" content="2013-10-02">
<meta name="description" content="A summary of this blog article: This post explains how the processing of mathematical expressions works in the script language of software by RP Photonics. Although the user does not need to know that, it may be interesting to look behind the scenes.">
<meta name="copyright" content="2019 RP Photonics Consulting GmbH">
<meta name="author" content="Dr. R&uuml;diger Paschotta">
<meta name="publisher" content="RP Photonics Consulting GmbH">
<meta name="referrer" content="always">
<meta name="geo.position" content="48.018; 8.540">
<meta name="geo.placename" content="Bad D&uuml;rrheim">
<meta name="geo.region" content="DE">
<meta name="distribution" content="global">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="photonics, modeling, software, optics, lasers, simulations, analysis, optimization, news, newsletter">
<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="general.js"></script>
<script type="text/javascript">
page="software_news_2013_10_02.html"; cat="S"; shownbanner=""; ref="software_news.html"; ts = new Date().toJSON().substring(0, 19);
$(document).ready(function($){ $.get("log.html",{cat:cat,page:page,ref:ref,shownbanner:shownbanner,ts:ts}); })
</script>
</head>
<body>
<div id="logohead">
<div class="areadiv"><table id="areatable"><tr><td>
<div class="areadiv"><table class="areasubtable">
<tr><td colspan="2" class="basicarea"><a href="marketing.html">RP Photonics Marketing</a></td></tr>
<tr><td><a href="encyclopedia.html">Encyclopedia</a></td>
<td><a href="buyersguide.html">Buyer's Guide</a></td></tr>
</table></div>
</td>
<td>
<div class="areadiv"><table class="areasubtable">
<tr><td colspan="2" class="basicarea"><a href="consulting.html">RP Services and Tools</a></td></tr>
<tr><td><a href="consulting.html">Consulting</a></td>
<td class="selected"><a href="software.html">Software</a></td></tr>
</table></div>
</td></tr></table></div>
<p><span id="title1">RP Photonics</span></p>
<p><span id="title2">Software</span> <span id="slogan">&hellip; powerful tools for your research &amp; development!</span></p>
</div>
<nav id="soft">
<div id="navitems">
<a id="Software" href="software.html">Overview</a>
<a id="Modeling" href="software_modeling.html">Modeling</a>
<a id="rp_fiber_calculator" href="rp_fiber_calculator.html">RP Fiber Calculator</a>
<a id="rp_fiberpower" href="fiberpower.html">RP Fiber Power</a>
<a id="rp_resonator" href="resonator.html">RP Resonator</a>
<a id="rp_propulse" href="propulse.html">RP ProPulse</a>
<a id="rp_coating" href="coating.html">RP Coating</a>
<a id="rp_q_switch" href="rp_q_switch.html">RP Q-switch</a>
<a id="script_language" href="software_script_language.html">Script language</a>
<a id="debugger" href="software_debugger.html">Debugger</a>
<a id="custom_forms" href="software_custom_forms.html">Custom forms</a>
<a id="licenses" href="software_licenses.html">Licenses</a>
<a id="documentation" href="software_docu.html">Documentation</a>
<a id="support" href="software_support.html">Support</a>
<a id="distributors" href="software_distributors.html">Distributors</a>
<a id="software_news" href="software_news.html" class="sel">Software News</a>
<a id="contact" href="software_contact.html">*Get a quotation*</a>
</div>
</nav>
<div id="main" style="margin-top:20px;">
<main>
<h1 class="spotlight_heading">The RP Photonics Software News</h1>
<h1 class="posting">How Mathematical Expressions are Treated in the Script Language of RP Photonics Software</h1>
<div class="posting_details">
<p>Posted on 2013-10-02 in the <a href="software_news.html">RP Photonics Software News (available as e-mail newsletter!)</a>
<p>Permanent link: <a href="software_news_2013_10_02.html">https://www.rp-photonics.com/software_news_2013_10_02.html</a></p>
<p>Author: <a href="paschotta.html">Dr. Rüdiger Paschotta</a>, <a href="index.html">RP Photonics Consulting GmbH</a></p>
<p>Abstract: This post explains how the processing of mathematical expressions works in the script language of software by RP Photonics. Although the user does not need to know that, it may be interesting to look behind the scenes.</p>
</div>
<figure class="right" style="width:130px;">
<img src="img/paschotta5.jpg" alt="Dr. Rüdiger Paschotta">
</figure>
<p>Today, I would like to give you some insight on how our software works internally in the context of mathematical expressions, handled by our script language.
Although as a user you do not need to know such things, it may be interesting to look behind the scenes.</p>
<p>When you generate some plot, you might use some code like the following e.g. in <a href="fiberpower.html"><b>RP Fiber Power</b></a>:</p>
<pre class="codedisplay">
diagram 1:
&nbsp;
"Amplifier Gain vs. Pump Power"
&nbsp;
x: 0, 400
"pump power (mW), @x
y: 0, 30
"amplifier gain (dB)", @y
&nbsp;
f: (set_P_in(pump, x * mW); 10 * lg(P_out(signal) / P_s_in))
</pre>
<p>The last line defines the plot, which is based on a mathematical expression.
For each <span class="eqn_il"><i>x</i></span> position, its evaluation will imply that the pump power is set, the new signal output power is calculated, and the gain in decibels is calculated from that power.</p>
<p>But how is that really done?
Obviously, the program must be able to read mathematical expressions, for example, understand their structure, store them in some suitable form, and evaluate them later on as needed.
What is really does:</p>
<figure class="right" style="width:100px;">
<img src="img/mathematical_expression.png" alt="tree structure for a mathematical expression">
</figure>
<ul>
<li>When a mathematical expression is read, its details are stored in the form of a tree structure.
For example, if the expression is sin(pi*x), the expression has a node for the sine function.
That function, having a single argument, points to a &ldquo;*&rdquo; node (multiplication).
That one has two operands, i.e., points to two other nodes: one with the constant <span class="eqn_il"><span class="greek">&pi;</span></span>, another one with the variable x.
Here, x is actually a parameter, the value of which will be stored on a stack (rather than the table of global variables).
See the illustration on the right side.</li>
<li>Later on, when the plot is made, that structure can be evaluated efficiently.
For each x value, the corresponding value is put on the stack.
Then, the &ldquo;sin&rdquo; node is asked to return its result.
Of course, it takes the value of is argument, calculates the sine, and returns that.
Its argument, the &ldquo;*&rdquo; node, itself calls for the two operand values and returns their product.</li>
</ul>
<p>Of course, that was only a simple example.
You can imagine that there are more complicated types of nodes &ndash; for example, for functions with multiple arguments and parameters (doing integrations), blocks of expressions with constants and local variables, etc.
There are around 130 standard functions for the arithmetics.
In addition, there are many additional predefined functions for the physics.
In <a href="fiberpower.html"><b>RP Fiber Power</b></a>, for example, there are 247 functions, for example for defining and modifying a fiber amplifier or laser model and for retrieving calculated results.</p>
<p>You can easily imagine that it takes some time to implement all that &ndash; and why our competitors don't just equip their products with a script language as well!
It surely takes more than Friday afternoon to do such a thing.
However, the script language is the key for absolutely flexible use of our software: the end user can program anything himself or herself, without having to deal with the source code.
For example, the user can define <em>any</em> kind of plot &ndash; not only select one of those which we anticipated.</p>
<p>You may wonder how the speed of script evaluation compares with direct programming, e.g. with Delphi (the development system we use).
When some complex mathematical expressions are evaluated, it is several times slower.
However, note that most of the computation time is often spent within predefined functions, where plain Delphi-generated code is executed.
For example, one may need some Fourier transforms (FFT algorithm) in a script, and these are of course not implemented with script code, but with a predefined function, which works quite efficiently.
Therefore, the speed of execution is in practice often not much lower than if you would implement all the things directly with Delphi, C++ or C#.
And <em>your</em> speed and efficiency is certainly much higher.
This is what counts in the end, of course.</p>
<p style="font-size:85%; margin-bottom:10px;">This article is a posting of the <a href="software_news.html">RP Photonics Software News</a>, authored by <a href="paschotta.html">Dr. Rüdiger Paschotta</a>.
You may link to this page, because its location is permanent.</p>
<p style="font-size:85%; margin-bottom:15px;">Note that you can also receive the articles in the form of a <a href="newsletters.html">newsletter</a> or with an <a href="software_news.rss">RSS feed</a>.</p>
<p style="margin-top:15px;">If you like this article, share it with your friends and colleagues, e.g. via social media:</p>
<div class="shariff" data-services="[&quot;linkedin&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-theme="standard" data-lang="en" data-orientation="horizontal"></div>
<script type="text/javascript" src="shariff/shariff.min.js"></script>
</main>
<div id="up_arrow">
<a href="javascript:scroll(0,0)"><img src="img/up.png" width="32" height="20" alt="arrow"></a>
</div>

</div>
<footer id="copyrightbox">
<span class="copyright">&copy; <a href="paschotta.html">Dr. Rüdiger Paschotta</a>, RP Photonics Consulting GmbH, also at <a href="https://profiles.google.com/109063044353551581702?rel=author">Google+</a>&nbsp;&nbsp;&nbsp;&nbsp; All rights reserved worldwide</span>
</footer>
</body>

<!-- Mirrored from www.rp-photonics.com/software_news_2013_10_02.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Feb 2019 03:10:12 GMT -->
</html>
