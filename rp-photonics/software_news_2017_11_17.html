<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from www.rp-photonics.com/software_news_2017_11_17.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Feb 2019 03:09:24 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Software from RP Photonics - Modeling Multi-Stage Amplifiers with RP Fiber Power</title>
<link rel="stylesheet" type="text/css" href="styles.css">
<link rel="stylesheet" type="text/css" href="shariff/shariff.complete.css">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="alternate" type="application/rss+xml" title="The Photonics Spotlight" href="spotlight.rss">
<link rel="alternate" type="application/rss+xml" title="The RP Photonics Software News" href="software_news.rss">
<link rel="alternate" type="application/rss+xml" title="New encyclopedia articles" href="new_articles.rss">
<meta name="date" content="2017-11-17">
<meta name="description" content="A summary of this blog article: Optical amplifiers and other devices containing multiple active fiber stages can be modeled with the software RP Fiber Power. The article discusses different approaches and shows you how to easily implement quite sophisticated models.">
<meta name="copyright" content="2019 RP Photonics Consulting GmbH">
<meta name="author" content="Dr. R&uuml;diger Paschotta">
<meta name="publisher" content="RP Photonics Consulting GmbH">
<meta name="referrer" content="always">
<meta name="geo.position" content="48.018; 8.540">
<meta name="geo.placename" content="Bad D&uuml;rrheim">
<meta name="geo.region" content="DE">
<meta name="distribution" content="global">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="photonics, modeling, software, optics, lasers, simulations, analysis, optimization, news, newsletter">
<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="general.js"></script>
<script type="text/javascript">
page="software_news_2017_11_17.html"; cat="S"; shownbanner=""; ref="encyclopedia_a.html"; ts = new Date().toJSON().substring(0, 19);
$(document).ready(function($){ $.get("log.html",{cat:cat,page:page,ref:ref,shownbanner:shownbanner,ts:ts}); })
</script>
</head>
<body>
<div id="logohead">
<div class="areadiv"><table id="areatable"><tr><td>
<div class="areadiv"><table class="areasubtable">
<tr><td colspan="2" class="basicarea"><a href="marketing.html">RP Photonics Marketing</a></td></tr>
<tr><td><a href="encyclopedia.html">Encyclopedia</a></td>
<td><a href="buyersguide.html">Buyer's Guide</a></td></tr>
</table></div>
</td>
<td>
<div class="areadiv"><table class="areasubtable">
<tr><td colspan="2" class="basicarea"><a href="consulting.html">RP Services and Tools</a></td></tr>
<tr><td><a href="consulting.html">Consulting</a></td>
<td class="selected"><a href="software.html">Software</a></td></tr>
</table></div>
</td></tr></table></div>
<p><span id="title1">RP Photonics</span></p>
<p><span id="title2">Software</span> <span id="slogan">&hellip; powerful tools for your research &amp; development!</span></p>
</div>
<nav id="soft">
<div id="navitems">
<a id="Software" href="software.html">Overview</a>
<a id="Modeling" href="software_modeling.html">Modeling</a>
<a id="rp_fiber_calculator" href="rp_fiber_calculator.html">RP Fiber Calculator</a>
<a id="rp_fiberpower" href="fiberpower.html">RP Fiber Power</a>
<a id="rp_resonator" href="resonator.html">RP Resonator</a>
<a id="rp_propulse" href="propulse.html">RP ProPulse</a>
<a id="rp_coating" href="coating.html">RP Coating</a>
<a id="rp_q_switch" href="rp_q_switch.html">RP Q-switch</a>
<a id="script_language" href="software_script_language.html">Script language</a>
<a id="debugger" href="software_debugger.html">Debugger</a>
<a id="custom_forms" href="software_custom_forms.html">Custom forms</a>
<a id="licenses" href="software_licenses.html">Licenses</a>
<a id="documentation" href="software_docu.html">Documentation</a>
<a id="support" href="software_support.html">Support</a>
<a id="distributors" href="software_distributors.html">Distributors</a>
<a id="software_news" href="software_news.html" class="sel">Software News</a>
<a id="contact" href="software_contact.html">*Get a quotation*</a>
</div>
</nav>
<div id="main" style="margin-top:20px;">
<main>
<h1 class="spotlight_heading">The RP Photonics Software News</h1>
<h1 class="posting">Modeling Multi-Stage Amplifiers with RP Fiber Power</h1>
<div class="posting_details">
<p>Posted on 2017-11-17 in the <a href="software_news.html">RP Photonics Software News (available as e-mail newsletter!)</a>
<p>Permanent link: <a href="software_news_2017_11_17.html">https://www.rp-photonics.com/software_news_2017_11_17.html</a></p>
<p>Author: <a href="paschotta.html">Dr. Rüdiger Paschotta</a>, <a href="index.html">RP Photonics Consulting GmbH</a></p>
<p>Abstract: Optical amplifiers and other devices containing multiple active fiber stages can be modeled with the software RP Fiber Power. The article discusses different approaches and shows you how to easily implement quite sophisticated models.</p>
</div>
<figure class="right" style="width:130px;">
<img src="img/paschotta5.jpg" alt="Dr. Rüdiger Paschotta">
</figure>
<p>For strongly amplifying optical signals in fibers, it is often necessary to employ two or even more <a href="fiber_amplifiers.html" title="fiber amplifiers: optical amplifiers with doped fibers as gain media">fiber amplifier</a> stages.
For example, one may need to filter out <a href="amplified_spontaneous_emission.html" title="amplified spontaneous emission: a process where spontaneously emitted radiation (luminescence) is amplified">ASE</a> or backward-propagating light between the stages, or one may want to use different fibers for the different stages (e.g. with larger <a href="effective_mode_area.html" title="effective mode area: a quantitative measure of the area which a waveguide or fiber mode effectively covers in the transverse dimensions">effective mode area</a> and <a href="double_clad_fibers.html" title="double-clad fibers: optical fibers with different waveguide structures for pump and signal light">cladding pumping</a> for a power amplifier).
Here, I want to share some thoughts about how to model such multi-stage amplifiers with our software <a href="fiberpower.html"><b>RP Fiber Power</b></a>.
(I have already addressed similar things in an <a href="software_news_2016_04_12.html">earlier posting</a>, but here I want to present some additional ideas.)</p>
<h2 class="togglediv">One Script per Stage</h2>
<div>
<p>The conceptually simplest approach is to use separate simulation scripts for the different stages, or alternatively to model them using the interactive forms.
That can be an appropriate approach particularly if each stage needs to be analyzed and optimized in detail before proceeding with the next stage.</p>
<p>A question of practical importance can then be how transfer data between the different simulations.
In a simple case, it may only be a constant signal output power from one stage which needs to be used as the input power for the next stage; you may just transfer that manually.
However, there may also be a complete ASE spectrum to transfer, i.e., a whole array of power values.
In case of <a href="ultrashort_pulses.html" title="ultrashort pulses: optical pulses with durations of picoseconds or less">ultrashort pulse</a> amplification, whole pulses need to be transferred, represented e.g. with complex amplitudes in the time or frequency domain.
The natural solution is to save such data into one or more files, which can then be read by the script for the next stage.
That just requires a little more code, but our powerful <a href="software_script_language.html">script language</a> allows you to save and load any data.
You may even use that within interactive forms, where you can inject some script code for such tasks.</p>
<p>Limitations of that simple approach may be encountered in some situations:</p>
<ul>
<li>If some detail of the first amplifier stage is modified, you will need to manually start the simulation for subsequent stages again &ndash; which is a pain if that happens frequently.</li>
<li>Making diagrams which contain outputs from more than one stage (as in Figure&nbsp;1) is possible, but again requires saving and loading of data, which may be somewhat inconvenient.</li>
<li>The simple approach fails in cases with mutual interactions between the stages.
Imagine, for example, that backward ASE or residual pump power from the second amplifier stage influences the first stage.
For calculating a self-consistent state, one can obviously no longer consider the stages separately.</li>
</ul>
<figure>
<img src="img/fl_with_2_active_fibers1.png" alt="optical powers in a fiber laser">
<figcaption><span class="start">Figure&nbsp;1:</span> 
Variation of optical powers within a fiber laser containing two active fibers. That example has been taken from an <a href="software_news_2016_04_12.html">earlier posting</a>.
</figcaption>
</figure>
</div>
<h2 class="togglediv">One Script for Several Stages</h2>
<div>
<p>It is indeed often required (or just more convenient) to make a single simulation script which treats more than one amplifier stage (and possibly even the seed laser, for example a <a href="mode_locked_lasers.html" title="mode-locked lasers: lasers which emit ultrashort pulses on the basis of the technique of mode locking">mode-locked laser</a>).</p>
<aside class="callout green">How to define and address different amplifier stages in a script?</aside>
<p>The question is then how to address the different stages with functions which do not have the index of the stage as a parameter.
The solution is quite simple: you can use a function call like set&lowbar;device(2) in order to tell the software that what comes next &ndash; for example, the definition of a fiber with all corresponding optical channels, or the retrieval of calculated data &ndash; refers to the second device, which may be the second amplifier stage.</p>
<p>Below, I show you some example code for calculating the steady state of a dual-stage fiber amplifier, where the signal goes from the first to the second stage, while some residual pump light from the second stage enters the first one (and ASE is ignored).
It is assumed that the fibers and their optical channels have already been defined, and the following function can then be used to calculate the steady state:</p>
<pre class="codedisplay">
find_steady_state(P_s_in, P_p1, P_p2) :=
  begin
    global allow all;
    var P_s_fw, P_p_bw, NoSteps;
    NoSteps := 0;
    set_device(1);
    set_P_in(pump1_fw, P_p1);
    set_P_in(signal1, P_s_in);
    repeat
      inc(NoSteps);
      P_s_fw := P_out(signal1);
      set_device(2);
      set_P_in(pump2_bw, P_p2);
      set_P_in(signal2, P_s_fw);
      P_p_bw := P_out(pump2_bw); { backward pump power left over by the second stage }
      set_device(1);
      set_P_in(pump1_bw, P_p_bw);
    until abs(P_s_fw - P_out(signal1)) &lt; 0.01 mW;
    NoSteps;
  end
</pre>
<p>I suppose that even those not having seen the manual can quite easily guess what the different elements of that code are doing.
When calling that function, you tell it the signal input power of the first stage and the pump powers of both stages, and the function returns the number of iterations required to find the steady-state (which may typically be 2).
Thereafter, you can retrieve any outputs, for example display the signal output powers (with 3 valid digits and units of watts) after the two stages:</p>
<pre class="codedisplay">
calc find_steady_state(1 mW, 150 mW, 1600 mW)
show "P_s1: ", (set_device(1); P_out(signal1)):d3:"W"
show "P_s2: ", (set_device(2); P_out(signal2)):d3:"W"
</pre>
<p>It is also no problem to create a diagram, which for example displays the final signal output power as a function of the signal input power for given fixed values of the pump powers:</p>
<pre class="codedisplay">
diagram 1:
&nbsp;
"Signal Output vs. Signal Input"
&nbsp;
x: 0, 20
"signal input power (mW)", @x
y: 0, 1500
"signal output power (mW)", @y
&nbsp;
f: (find_steady_state(x * mW, 150 mW, 1600 mW);
    set_device(2);
    P_out(signal2) / mW),
  color = blue
</pre>
<p>Similar things can be done in the context of ultrashort pulse amplification.
You can just create a start pulse (e.g., a <a href="gaussian_pulses.html" title="Gaussian pulses: pulses with a temporal intensity profile which has a Gaussian shape">Gaussian pulse</a> with given parameters, or a pulse read from a file, or the steady-state output from a mode-locked laser model in the same script) and subsequently send that through the different stages.
You may prepare each stage concerning the excitation state of its laser-active ions with a continuous-wave calculation (e.g. based on the signal average power, calculated as the product of pulse energy and pulse repetition rate), or simulate repetitive amplification after turning on constant pump powers (or any other temporal profile of pump powers).
You can also define a function which does certain iterative steps until the steady state is reached.
These are just examples &ndash; you can essentially do whatever comes to your mind!</p>
</div>
<h2 class="togglediv">Scripting vs. Graphical Interfaces</h2>
<div>
<p>Some other products (e.g. from VPIphotonics) use a totally different approach for modeling systems with multiple amplifier stages.
There, you interactively place some symbols for amplifier stages on a desktop and connect them with lines symbolizing the flow of light between them.
You modify details of an amplifier stage by right-clicking on the corresponding symbol and entering data in the obtained pop-up form.
Further tools assist you in making diagrams, for example.</p>
<p>At a first glance, you may think that such a GUI approach is easier than writing a script with elements as shown above.
However, while that might be true in the simplest cases, you would soon hit the inherent limitations of that approach when you need to do more sophisticated things in your R&amp;D work.
Even if the user interface is sufficiently cute e.g. to allow you the generation of diagrams where any calculated quantity is shown as a function of some input parameter, you may often need to do more complicated things which go beyond the flexibility of such a software, or at least are then quite difficult and cumbersome to achieve.
(Typically, you would notice such limitation sometime after purchase, one would then be stuck without a viable solution.)
Imagine that you need to further mathematically process calculated data &ndash; for example, store subsequent amplified pulses under the influence of random noise and use Fourier transforms and related stuff (like applying window functions) for calculating noise spectra.
Even if the software were good enough to store the relevant parameters of your pulses in a file, it would be inconvenient to transfer all the data to some other software just for the mathematical processing.
It is just the easiest if you can do everything within your simulation script.</p>
<aside class="callout green">Could a MATLAB interface be the solution?</aside>
<p>By the way, there are some software packages having an interface e.g. for MATLAB, so that you can control the model with MATLAB (e.g. automatically change some parameters) and process the results in MATLAB.
That way, substantial flexibility is added, but that comes at a price.
First of all, you need to have a MATLAB license and to be sufficiently familiar with it.
Second, you will have to find out how exactly to handle that interface.
Third, the execution will probably be rather slow compared with our software.</p>
<p>Others may consider to do everything in MATLAB &ndash; another environment for calculations with scripting.
That means a huge workload, however, because you will have to implement a lot of complicated optics and physics calculations instead of working on your actual problem.</p>
<p>For such reasons, I have decided for the <a href="software_script_language.html">scripting</a> approach in our software, which can still be combined with interactive forms, even with <a href="software_custom_forms.html">user-defined forms</a>.
That gives you unparalleled flexibility and is also quite nice to use.</p>
<p>I am always glad to learn from our power users what cute things they have done with our software, exploiting the power of scripting.
And maybe articles like that one help you (and motivate you) to become such a power user as well.
I am happy to help you with my <a href="software_support.html">technical support</a>.</p>
</div>
<p style="font-size:85%; margin-bottom:10px;">This article is a posting of the <a href="software_news.html">RP Photonics Software News</a>, authored by <a href="paschotta.html">Dr. Rüdiger Paschotta</a>.
You may link to this page, because its location is permanent.</p>
<p style="font-size:85%; margin-bottom:15px;">Note that you can also receive the articles in the form of a <a href="newsletters.html">newsletter</a> or with an <a href="software_news.rss">RSS feed</a>.</p>
<p style="margin-top:15px;">If you like this article, share it with your friends and colleagues, e.g. via social media:</p>
<div class="shariff" data-services="[&quot;linkedin&quot;,&quot;facebook&quot;,&quot;twitter&quot;,&quot;googleplus&quot;]" data-theme="standard" data-lang="en" data-orientation="horizontal"></div>
<script type="text/javascript" src="shariff/shariff.min.js"></script>
</main>
<div id="up_arrow">
<a href="javascript:scroll(0,0)"><img src="img/up.png" width="32" height="20" alt="arrow"></a>
</div>

</div>
<footer id="copyrightbox">
<span class="copyright">&copy; <a href="paschotta.html">Dr. Rüdiger Paschotta</a>, RP Photonics Consulting GmbH, also at <a href="https://profiles.google.com/109063044353551581702?rel=author">Google+</a>&nbsp;&nbsp;&nbsp;&nbsp; All rights reserved worldwide</span>
</footer>
</body>

<!-- Mirrored from www.rp-photonics.com/software_news_2017_11_17.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 12 Feb 2019 03:09:25 GMT -->
</html>
