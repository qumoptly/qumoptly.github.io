var listLasersURL='/Tools/TechTools/ListLaserSpotSize/';var getLasersURL='/Tools/TechTools/GetLaserSpotSize/';var $loading=$('#loadingDiv').hide();var $diode=$('#diode').hide();$(document).ajaxStart(function(){$loading.show();}).ajaxStop(function(){$loading.hide();$diode.show();$('#dropdown').css('display','block')});$(document).ready(function(){$.ajax({url:listLasersURL,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",success:function(data){if(data!=null){$.each(data.Data,function(){$("#diode").append('<option value='+this.StockNumber+'>'+this.StockNumber+' - '+this.Name+'</option>')});}}});});$("#diode").change(function(){if($("#diode").val()=="0"){$("#searchLink").empty();$("#inBeamDiam").text("--");$("#inBeamDiv").text("--");$("#outBeamDiam").text("--");$("#hiddenDIA1").val(0);$("#hiddenDIA2").val(0);$("#hiddenDIV1").val(0);$("#hiddenDIV2").val(0);$("#feetMMData").val("")}else{var stockNum=$('#diode').val();$.ajax({url:getLasersURL+'?stockNum='+stockNum,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",global:false,success:function(data){if(data!=null){var DIA1=(parseFloat(data.Data.DIA01)).toFixed(2);var DIA2=(parseFloat(data.Data.DIA02)).toFixed(2);var DIV1=(parseFloat(data.Data.DIV01)).toFixed(2);var DIV2=(parseFloat(data.Data.DIV02)).toFixed(2);$("#hiddenDIA1").val(DIA1);$("#hiddenDIA2").val(DIA2);$("#hiddenDIV1").val(DIV1);$("#hiddenDIV2").val(DIV2);$("#searchLink").empty();var searchLink='<a href="/search/?criteria='+data.Data.StockNumber+'">'+data.Data.StockNumber+' - '+data.Data.Name+' </a>';$("#searchLink").append(searchLink);beamDiameter=" "+DIA1+" x "+DIA2;$("#inBeamDiam").text(beamDiameter);beamDivergence=" "+DIV1+" x "+DIV2;$("#inBeamDiv").text(beamDivergence);}}});}});$("#calcBtn").click(function(){if($("#feetMMData").val()==""){$("#outBeamDiam").text("--");}
else{var feetMM=$("#feetMM").val();var Length_data=parseFloat($("#feetMMData").val());var DIA1=parseFloat($("#hiddenDIA1").val());var DIA2=parseFloat($("#hiddenDIA2").val());var DIV1=parseFloat($("#hiddenDIV1").val());var DIV2=parseFloat($("#hiddenDIV2").val());var SpotSize1;var SpotSize2;var SpotSize1b;var SpotSize2b;var shortMeasureName;var beamDivergence;var beamDiameter;if(feetMM=="feet"){SpotSize1=DIA1+((DIV1*0.3048)*Length_data);SpotSize2=DIA2+((DIV2*0.3048)*Length_data);shortMeasureName="ft";}else{SpotSize1=DIA1+(DIV1*0.3048*(Length_data/304.8));SpotSize2=DIA2+(DIV2*0.3048*(Length_data/304.8));shortMeasureName="mm";}
if($("#hiddenDIA1").val()!=="0"&$("#hiddenDIA2").val()!=="0"&$("#hiddenDIV1").val()!=="0"&$("#hiddenDIV2").val()!=="0"){if(DIA1!=DIA2){beamDiameter=SpotSize1.toFixed(2)+"mm x "+SpotSize2.toFixed(2)+"mm";$("#outBeamDiam").text(beamDiameter+" (elliptical)");}else{beamDiameter=SpotSize1.toFixed(2)+"mm";$("#outBeamDiam").text(beamDiameter+" (circular)");}}
else{$("#outBeamDiam").text("--");}}});